# buffer的学习笔记

### 客户端和服务端为什么要三次握手？

- 为什么要握手“三次”？两次不行吗？

    核心原因是为了防止“已失效的连接请求报文”突然又传到了服务器，导致资源浪费。
    
    假设只有两次握手：

    客户端发了一个连接请求，但在网络中“堵车”了，没能及时到达。

    客户端等不及了，又发了第二个请求，这次很快建立连接，聊完后挂断了。

    结果第一个“堵车”的请求现在终于到了服务器。如果是两次握手，服务器只要一回复，连接就建立了。

    但此时客户端根本不需要这个连接，它会忽略服务器的回复。

    服务器却一直在傻傻等客户端发数据，白白浪费了内存和 CPU 资源。

    三次握手的本质是：确保双方都明确知道对方已经准备好了。